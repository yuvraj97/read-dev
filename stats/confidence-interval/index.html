<!DOCTYPE HTML>
<!--
    "Thanks to HTML5 UP for this template".
    Massively by HTML5 UP
    html5up.net | @ajlkn
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
    <head>

        
        <link rel="stylesheet" href="/data/assets/css/main.css">
        <link rel="stylesheet" href="/data/auth/authStyle.css">
        <link id="quantml-theme" rel="stylesheet" href="" />
        <link id="quantml-auth-style" rel="stylesheet" href="">

        <!--KATEX-->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">

        <!-- The loading of KaTeX is deferred to speed up page rendering -->
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>

        <!-- To automatically render math in text elements, include the auto-render extension: -->
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>

        <title>Confidence Interval</title>
        <meta charset="utf-8" />
        <link rel="icon" href="/data/icon.png" type="image/png" sizes="16x16">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        
        
    </head>
    <body style="display: none;">

        <!-- Wrapper -->
            <div id="wrapper">

                <!-- Header -->
                <header id="header">
                    <a href="https://quantml.org" class="logo image jump-big"><img id="quantml-cover" src="/data/img/cover.png" alt="QuantML.org" /></a>
                </header>

                <!-- Nav -->
                    <nav id="nav">
                        <ul class="links">
                            <li class="cover"><a href="/stats/"><img src="/data/img/STATISTICS-cover.png" alt="STATISTICS"></a></li>
                            <li><a href="estimation.html">&#x25C0;</a></li>
                            <li class="active"><a href="ci.html">Confidence Interval</a></li>
                            <li><a href="delta.html">Delta Method</a></li>
                            <li><a href="interpretation.html">Interpretation of CI</a></li>
                            <li><a href="hypothesis.html">&#x25B6;</a></li>
                        </ul>
                        <ul class="icons">
                            <li><a target="_blank" href="https://app.quantml.org/stats/"><img src="/data/img/app.png" alt="App"></a></li>
                            <li><a target="_blank" href="https://join.slack.com/t/quantml-org/shared_invite/zt-jffw86bo-6M260iyt1q2MgBma9elewg"><img class="whiteback" src="/data/img/slack.png" alt="Slack"></a></li>
                            <li><a target="_blank" href="https://www.linkedin.com/in/yuvraj97/"><img src="/data/img/linkedin.png" alt="LinkedIn"></a></li>
                            <li><a target="_blank" href="https://github.com/yuvraj97/"><img src="/data/img/github.png" alt="GitHub"></a></li>
                            <li style="display: none;" id="login-button"><button id="login-btn-width" class="login-logout-join" >Login &nbsp; <img src="/data/img/patreon.png" alt="Patreon"></button></li>
                            <li style="display: none;" id="join-button"><button onclick=" window.open('https://www.patreon.com/quantml','_blank')" id="join-btn-width" class="login-logout-join" >Join &nbsp; <img src="/data/img/patreon.png" alt="Patreon"></button></li>
                            <li style="display: none;" id="logout-button"><button id="logout-btn-width" class="login-logout-join" >Logout &nbsp; <img src="/data/img/patreon.png" alt="Logout"></button></li>
                            <li><a style="cursor: pointer;"><img id="change-theme" src="" alt="Change Theme"></a></li>
                            <li title="Settings" class="settings jump"><img onclick="showSettings()" src="/data/img/setings.png" alt="Settings" width="25px" height="25px">
                        </ul>
                    </nav>


                <!-- Main -->
                    <div id="main">
                        <section class="post">
<div class='buttons'>
    <button class="button jump" onclick="window.location.href = 'bias.html';">&#x25C0;&nbsp;&nbsp;Bias</button>
    <button class="button jump"  style="float: right;" onclick="window.location.href = 'delta.html';">Delta&nbsp;&nbsp;&#x25B6;</button>
</div><br>
    <p>
<!--&#120793;-->
<h3 style="font-family: inherit;" id='ci'>Confidence Interval</h3>
We will use asymptotic normality to build confidence intervals.<br>
An estimator  \(\hat{\theta}_n\) of \(\theta\) is <b>asymptotically normal</b> if:  \(\sqrt{n} (\hat{\theta}_n-\theta ) \xrightarrow [n\to \infty ]{(d)} \mathcal{N}(0,\sigma^2)\)<br>
When we estimate an estimator there is some error associated with that estimator, by confidence interval we are giving a range to that estimator with some level of confidence (like say 95\(\%\) of confidence)<br>
Say we have a statistical model from our observation \(X_1,\cdots,X_n\),  with sample space \(=E\) , a family of distribution \((P_\theta)_{\theta\in \Theta} \) and a parameter space \(= \Theta\)<br>
Let \(\alpha\in(0,1)\)<br>
Confidence Interval (C.I.) for \(\theta\) of level \( 1-\alpha \) (we want this level to be high) , is a <b>random</b> interval \(\mathcal{I}\), which depends on our data \((X_1,\cdots,X_n)\) and it do <b>not</b> depends on \(\theta\) (which is unknown)<br>
<blockquote>
Probability that our random interval containes \(\theta\) is atleast \( 1-\alpha \)
<div class="math-container">
\[\mathbb{P}[\theta\in\mathcal{I}]\geq 1-\alpha,\quad,\forall\theta\in\Theta\]
</div>
</blockquote>
Asymptotic Confidence Interval (C.I.) for \(\theta\) of asymptotic level \( 1-\alpha \) is a <b>random</b> interval \(\mathcal{I}\) it depends on our data \((X_1,\cdots,X_n)\) and it do <b>not</b> depends on \(\theta\) (which is unknown)<br>
<div class="math-container">
\[\lim_{n\to\infty}\mathbb{P}_\theta[\theta\in\mathcal{I}]\geq 1-\alpha\]
</div>

<span id="kiss_ex"></span>
Recall our <a  href="intro.html#kiss_ex">kiss example</a><br>
<ul>
	<li>
		Observations are \(R_1,\cdots,R_n  \stackrel{iid}{\sim } Ber(p)\) for some unknown \(p\in(0,1)\)<br>
	</li>
	<li>
		Statistical Model \(\left(  \{0,1\}, (Ber(p))_{p\in(0,1)}  \right)\)
	</li>
	<li>
		Our estimator for \(p\)  is \(\hat{p}_n=\overline{R}_n\)<br>
		\(\text{bias}(\hat{p})=0\),<br>
        \(\mathbb{E}(\hat{p})=p\),<br>
        \(\text{var}(\hat{p})=\frac{p(1-p)}{n}\)
	</li>
	<li>
		Using <a  href="/stats/lln-clt/#clt">CLT</a><br>
		<div class="math-container">
			\[\sqrt{n}\frac{\overline{R}_n-p}{\sqrt{p(1-p)}}\xrightarrow [n\to \infty ]{(d)}\mathcal{N}(0,1) \]
            equivalently:
            \[\sqrt{n}(\overline{R}_n-p) \xrightarrow [n\to \infty ]{(d)}\mathcal{N}(0,p(1-p)) \]
            Asymptotic variance of \(\overline{R}_n\) is \(p(1-p)\)<br>
		</div>
    </li>
</ul>

Say:CDF of \(\mathcal{N}(0,1):=\Phi(x)\) and CDF of \(\sqrt{n}\frac{\overline{R}_n-p}{\sqrt{p(1-p)}}:=\Phi_n(x)\)<br>
Then from CLT \(\Phi(x)\simeq\Phi_n(x)\) for large \(n\)<br>
So:<br>
<img style="width: 100%;" src="/stats/img/Z_between.png" width="315" height="170" style="float: right" alt="">
\(\mathbb{P}\left(  \sqrt{n}\frac{\overline{R}_n-p}{\sqrt{p(1-p)}} \leq x\right) \simeq \Phi(x)\)<br>

<ul><li>
    Now Say: \(Z\sim\mathcal{N}(0,1)\Rightarrow\)\(\sqrt{n}\frac{\overline{R}_n-p}{\sqrt{p(1-p)}}\sim Z\)<br>
    \(\mathbb{P}\left(|Z|\leq x\right) = 1-2\left( 1-\Phi(x)  \right) \)
</li></ul>
<div class="math-container">
    \(\Rightarrow \mathbb{P}\left(\left|  \sqrt{n}\frac{\overline{R}_n-p}{\sqrt{p(1-p)}}\right| \leq x\right) \simeq 1-2\left( 1-\Phi(x) \right)\)
    <br><br>
    \(\Rightarrow \mathbb{P}\left(|\overline{R}_n-p| \leq \frac{x\sqrt{p(1-p)}}{\sqrt{n}}\right) \simeq 1-2\left( 1-\Phi(x) \right)\)
</div>
<br>
Now say \(x'=\frac{x\sqrt{p(1-p)}}{\sqrt{n}}\)\(\Rightarrow x = \frac{x'\sqrt{n}}{\sqrt{p(1-p)}}\)
<div class="math-container">
    \(\Rightarrow \mathbb{P}\left(|\overline{R}_n-p| \leq x'\right) \simeq 1-2\left( 1-\Phi\left(\frac{x'\sqrt{n}}{\sqrt{p(1-p)}}\right) \right)\)<br>
    \(\Rightarrow \mathbb{P}\left(|\overline{R}_n-p| \geq x'\right) \simeq 2\left( 1-\Phi\left(\frac{x'\sqrt{n}}{\sqrt{p(1-p)}}\right) \right)\)<br>
    Now replace \(x'\) with \(x\)<br>
    \[\Rightarrow \mathbb{P}\left(|\overline{R}_n-p| \geq x\right) \simeq 2\left( 1-\Phi\left(\frac{x\sqrt{n}}{\sqrt{p(1-p)}}\right) \right)\]
</div>
<ul>
    <li>
    And we said that the probability that the interval \(\mathcal{I}\) contains \(p\) is <b>atleast</b> \(1-\alpha\) (as \(n \to \infty\)) So:<br>
    <div class="math-container">
    \( 2\left( 1-\Phi\left(\frac{x\sqrt{n}}{\sqrt{p(1-p)}}\right) \right) \simeq \alpha \)<br>
    \(\Rightarrow \Phi\left(\frac{x\sqrt{n}}{\sqrt{p(1-p)}}\right) \simeq 1-\frac{\alpha}{2}\)<br>
    \(\Rightarrow \frac{x\sqrt{n}}{\sqrt{p(1-p)}} \simeq \Phi^{-1}\left( 1-\frac{\alpha}{2} \right)\)<br>
    </div><br>
    </li>
    <ul style="list-style-type: circle" id="quantile"><li>
            <img style="width: 100%;" src="/stats/img/Z_1-alpha.png" width="315" height="200" style="float: right" alt="">
        \(\Phi^{-1}\left( 1-\frac{\alpha}{2} \right)\) is quantile of order \(1- \frac{\alpha}{2}\) of a r.v. \(\mathcal{N}(0,1)\) and it's denoted by \(\)<br>
        So \(\Phi^{-1}\left( 1-\frac{\alpha}{2} \right) := q_{\frac{\alpha}{2}}\)<br>
    </li></ul>
    \(\Rightarrow x \simeq \frac{ q_{\frac{\alpha}{2}} \sqrt{p(1-p)} }{\sqrt{n}}\)<br>
</ul>
And as we know that the probability that the interval \(\mathcal{I}\) contains \(p\) is <b>atleast</b> \(1-\alpha\) (as \(n \to \infty\)) So:<br>
\(\Rightarrow \mathbb{P}\left(|\overline{R}_n-p| \leq x\right) \simeq 1-\alpha\)<br>
\(\Rightarrow \mathbb{P}\left(-x\leq \overline{R}_n-p \leq x\right) \simeq 1-\alpha\)<br>
\(\Rightarrow \mathbb{P}\left(\overline{R}_n-x\leq p \leq \overline{R}_n+x\right) \simeq 1-\alpha\)<br>

So we can say:
<div class="math-container">
    \[\lim_{n\to\infty}\mathbb{P}\left( p\in \left[  \overline{R}_n - \frac{ q_{\frac{\alpha}{2}} \sqrt{p(1-p)} }{\sqrt{n}}, \overline{R}_n + \frac{ q_{\frac{\alpha}{2}} \sqrt{p(1-p)} }{\sqrt{n}} \right]\right) = 1-\alpha \]
</div>

<details>
    <summary><span class="bb" style="color: royalblue; background-color: lightyellow; cursor:pointer;">But this interval is <b>not</b> a confidence interval, but why?</span></summary>
    Because our interval \(\left[  \overline{R}_n - \frac{ q_{\frac{\alpha}{2}} \sqrt{p(1-p)} }{\sqrt{n}}, \overline{R}_n + \frac{ q_{\frac{\alpha}{2}} \sqrt{p(1-p)} }{\sqrt{n}} \right]\)
    depends on our parameter \(p\)
</details>

<hr style="width: 50%; height: 1px">
There are 3 solutions for this problem(that our interval depends on our parameter \(p\)):<br>
<ul>
    <li>
        The interval \(\mathcal{I}\) we found for our <a  href="intro.html#kiss_ex">kiss example</a> is:<br>
    <div class="math-container">
        \(\mathcal{I}=\left[  \overline{R}_n - \frac{ q_{\frac{\alpha}{2}} \sqrt{p(1-p)} }{\sqrt{n}}, \overline{R}_n + \frac{ q_{\frac{\alpha}{2}} \sqrt{p(1-p)} }{\sqrt{n}} \right]\)
    </div>
    </li>
</ul>

<h4 style="font-family: inherit;" id='i-conservative'>1. Conservative Bound</h4>
Here we took the widest interval, the length of out interval is \(2\times\frac{ q_{\frac{\alpha}{2}} \sqrt{p(1-p)} }{\sqrt{n}}\) now we have to maximize the length.<br>
(Say) \(2\times\frac{ q_{\frac{\alpha}{2}} \sqrt{p(1-p)} }{\sqrt{n}}=f(p)\)<br>
for what \(p\) our function \(f(p)\) is maximum, we can find it out by equating \(f'(p)=0\)<br>
\(f(p)\propto\sqrt{p(1-p)}\)<br>
<div class="math-container">
    \(\Rightarrow f'(p)=\frac{1-p-p}{2\sqrt{p(1-p)}}\)<br>
</div>
Now equating \(f'(p)=0\)<br>
\(1-2p=0\Rightarrow p=\frac{1}{2}\)<br>
At \(p=1/2\) our interval is widest.<br>
So our <b>asymptotic</b> confidence interval is:<br>
<div class="math-container">
    \[\mathcal{I}_{\text{conservative}}=\left[  \overline{R}_n - \frac{ q_{\alpha/2} }{2\sqrt{n}}, \overline{R}_n + \frac{ q_{\alpha/2} }{2\sqrt{n}} \right]\]
</div>
Probability that \(\mathcal{I}_{\text{conservative}}\) contains \(p\) is <b>atleast</b> \(1-\alpha\)<br>
<div class="math-container">
    \[\lim_{n\to\infty}\mathbb{P}(p\in\mathcal{I}_{\text{conservative}})\geq 1-\alpha\]
</div>
<br>

<h4 style="font-family: inherit;" id='i-solve'>2. Solving an equation for the parameter</h4>
We saw that:
<div class="math-container">
    \[\lim_{n\to\infty}\mathbb{P}\left( p\in \left[  \overline{R}_n - \frac{ q_{\frac{\alpha}{2}} \sqrt{p(1-p)} }{\sqrt{n}}, \overline{R}_n + \frac{ q_{\frac{\alpha}{2}} \sqrt{p(1-p)} }{\sqrt{n}} \right]\right) = 1-\alpha\]
</div>
So:
<div class="math-container">
    \[
      \overline{R}_n - \frac{ q_{\frac{\alpha}{2}} \sqrt{p(1-p)} }{\sqrt{n}} \leq p \leq \overline{R}_n + \frac{ q_{\frac{\alpha}{2}} \sqrt{p(1-p)} }{\sqrt{n}}  \\
      \Rightarrow -\frac{ q_{\frac{\alpha}{2}} \sqrt{p(1-p)} }{\sqrt{n}} \leq p - \overline{R}_n \leq \frac{ q_{\frac{\alpha}{2}} \sqrt{p(1-p)} }{\sqrt{n}}      \\
      \Rightarrow (p - \overline{R}_n)^2 \leq \frac{ q^{2}_{\alpha/2} p(1-p) }{n} \\
      \Rightarrow p^2+ \overline{R}_n^2 -2p \overline{R}_n \leq \frac{q^{2}_{\alpha/2}p}{n} -\frac{q^{2}_{\alpha/2}p^2}{n} \\
      \Rightarrow \left( 1+\frac{q^{2}_{\alpha/2}}{n} \right)p^2 -\left( 2\overline{R}_n+\frac{ q^{2}_{\alpha/2}}{n} \right)p + \overline{R}_n^2 \leq 0
    \]
</div>
Now we just have to find the two roots \((p_1 \leq p_2)\) of this quadratic equation.<br>
And then we will get our <b>asymptotic</b> confidence interval \(\mathcal{I}_{\text{solve}}=[p_1,p_2]\)<br>
Here we did not make anything conservative, we just took the equations and solve it.<br>
<ul><li>
    Like in the case of \(\mathcal{I}_{\text{conservative}}\) we took the largest interval.
</li></ul>
So: \[\lim_{n\to\infty}\mathbb{P}(p \in \mathcal{I}_{\text{solve}})=1-\alpha\]

<h4 style="font-family: inherit;" id='i-plugin'>3. Plug-in</h4>
        Using <a  href="/stats/lln-clt/#lln">LLN</a>: \(\hat{p}_n=\overline{R}_n \xrightarrow [n\to \infty ]{\mathbb{P},\mbox{ a.s.}} p \)<br>
        We know that by CLT: \[\sqrt{n}\frac{\overline{R}_n-p}{\sqrt{p(1-p)}}\xrightarrow [n\to \infty ]{(d)}\mathcal{N}(0,1)\]
        Then by <a  href="convergence.html#slutsky">Slutsky's Theorem</a> we have: \[\sqrt{n}\frac{\overline{R}_n-p}{\sqrt{\hat{p}(1-\hat{p})}}\xrightarrow [n\to \infty ]{(d)}\mathcal{N}(0,1)\]
        <details open>
            <summary><span class="bb" style="color: royalblue; background-color: lightyellow; cursor:pointer;">Explanation</span></summary>
            <blockquote>
            <div class="math-container">
            \[\underbrace{\sqrt{n}\frac{\overline{R}_n-p}{\sqrt{p(1-p)}}}_{  \xrightarrow [n\to \infty ]{\text{by CLT}}\ \mathcal{N}(0,1) }=\sqrt{n}\frac{\overline{R}_n-p}{\sqrt{\hat{p}(1-\hat{p})}} \underbrace{\frac{\sqrt{\hat{p}(1-\hat{p})}}{\sqrt{p(1-p)}}}_{\xrightarrow [n\to \infty ]{\text{by LLN and CMT}}\ 1}     \\
              \text{by using Slutsky's theorem}  \\
              \Rightarrow \sqrt{n}\frac{\overline{R}_n-p}{\sqrt{\hat{p}(1-\hat{p})}} \xrightarrow [n\to \infty ]{(d)} \mathcal{N}(0,1)
            \]
            </div>
            LLN: <a  href="/stats/lln-clt/#lln">Law of large numbers</a><br>
            CLT: <a  href="/stats/lln-clt/#clt">Central limit theorem</a><br>
            CMT: <a  href="convergence.html#cmt">Continuous mapping theorem</a>
            </blockquote>
        </details>
        So our new asymptotic confidence interval is:
        <div class="math-container">
            \[\mathcal{I}_{\text{plug-in}}=\left[\overline{R}_n-\frac{ q_{\frac{\alpha}{2}} \sqrt{\hat{p}(1-\hat{p})} }{\sqrt{n}}, \overline{R}_n + \frac{ q_{\frac{\alpha}{2}} \sqrt{\hat{p}(1-\hat{p})} }{\sqrt{n}} \right]  \]
        </div>
        \[\lim_{n\to\infty}\mathbb{P}(p \in \mathcal{I}_{\text{plug-in}})=1-\alpha\]
<hr>

Let's look at the <a  href="intro.html#kiss_ex">kiss example</a>:<br>
In kiss example we had \(n=124\) and \(\overline{R}_n = 0.645\)<br>
Now say we want \(95\%\) <b>asymptotic</b> confidence interval so here \(\alpha=5\%\)<br>

<details>
    <summary><span class="bb" style="color: royalblue; background-color: lightyellow; cursor:pointer;"> What is \(\mathcal{I}_{\text{conservative}}\)</span></summary>
    <div class="math-container">
        <blockquote>
        \[\mathcal{I}_{\text{conservative}}=\left[  \overline{R}_n - \frac{ q_{\alpha/2} }{2\sqrt{n}}, \overline{R}_n + \frac{ q_{\alpha/2} }{2\sqrt{n}} \right]  \\
        \Rightarrow\mathcal{I}_{\text{conservative}}=\left[  0.645 - \frac{q_{\alpha/2} }{2\sqrt{n}},0.645 + \frac{q_{\alpha/2} }{2\sqrt{n}}\right]\]
        <ul><li>
            \(\mathbb{P}(Z \leq q_{0.025})=1-0.025\)<br>
            <div style="font-family: inherit;" class="table-wrapper"><table><tr>
            <th><i>z</i></th>
            <th>+0.00</th>
            <th>+0.01</th>
            <th>+0.02</th>
            <th>+0.03</th>
            <th>+0.04</th>

            <th>+0.05</th>
            <th bgcolor="#00FF00">+0.06</th>
            <th>+0.07</th>
            <th>+0.08</th>
            <th>+0.09</th></tr>
            <tr>
            <th>1.9</th>
            <td>0.97128</td>
            <td>0.97193</td>
            <td>0.97257</td>
            <td>0.97320</td>
            <td>0.97381</td>
            <td>0.97441</td>
            <td bgcolor="#00FF00">0.97500</td>
            <td>0.97558</td>
            <td>0.97615</td>
            <td>0.97670
            </td></tr>
            </table></div>
            \(q_{\alpha/2}=q_{0.025}=1.96\)
        </li></ul>
        \[\Rightarrow\mathcal{I}_{\text{conservative}}=[0.5569,0.7330]\]

        </blockquote>
    </div>
</details>
<details>
    <summary><span class="bb" style="color: royalblue; background-color: lightyellow; cursor:pointer;">What is \(\mathcal{I}_{\text{solve}}\)</span></summary>
    <blockquote>
    <div class="math-container">
    \[\overline{R}_n - \frac{ q_{\frac{\alpha}{2}} \sqrt{p(1-p)} }{\sqrt{n}} \leq p \leq \overline{R}_n + \frac{ q_{\frac{\alpha}{2}} \sqrt{p(1-p)} }{\sqrt{n}} \\
      \Rightarrow 0.645 - \frac{1.96 \sqrt{p(1-p)} }{\sqrt{124}} \leq p \leq 0.645 + \frac{ 1.96 \sqrt{p(1-p)} }{\sqrt{124}} \\
      \Rightarrow 1.03p^2-1.32p+0.41=0
    \]
    \(\Rightarrow p_1=0.5288,p_2=0.7527\)<br>
    \(\Rightarrow \mathcal{I}_{\text{solve}}=[0.5288,0.7527]\)
    </div>
    </blockquote>
</details>
<details>
        <summary><span class="bb" style="color: royalblue; background-color: lightyellow; cursor:pointer;">What is \(\mathcal{I}_{\text{plug-in}}\)</span></summary>
        <blockquote>
        <div class="math-container">
        \[\mathcal{I}_{\text{plug-in}}=\left[\overline{R}_n-\frac{ q_{\frac{\alpha}{2}} \sqrt{\hat{p}(1-\hat{p})} }{\sqrt{n}}, \overline{R}_n + \frac{ q_{\frac{\alpha}{2}} \sqrt{\hat{p}(1-\hat{p})} }{\sqrt{n}} \right] \\
          \Rightarrow \mathcal{I}_{\text{plug-in}}=\left[0.645-\frac{ 1.96 \sqrt{0.645(1-0.645)} }{\sqrt{124}}, 0.645 + \frac{ 1.96 \sqrt{0.645(1-0.645)} }{\sqrt{124}} \right]
        \]
        \(\Rightarrow  \mathcal{I}_{\text{plug-in}}=[0.5607,0.7292]\)
        </div>
        </blockquote>
</details>
Now there are 3 <b>asymptotic</b> confidence intervals but which one to choose, well this is up to us.<br>
\(\mathcal{I}_{\text{conservative}}\) is the conservative one by definition.<br>
<br>
<span id="ex"></span>
<b>Examples for CI:</b><br>
<ul>
    <li>
        Say we have two asymptotic confidence Interval \(\mathcal{I}\) at \(95\%\) of CI and \(\mathcal{J}\) at \(98\%\) of CI.<br>
        Which of following is correct:<br>
        <ol>
            <li>We <b>always have</b> \(\mathcal{I} \subset \mathcal{J}\)</li>
            <li>We <b>always have</b> \(\mathcal{J} \subset \mathcal{I}\)</li>
            <li>None of the above</li>
        </ol>
        <details>
        <summary><span class="bb" style="color: royalblue; background-color: lightyellow; cursor:pointer;">Answer</span></summary>
        <blockquote>
        Answer is None of the above<br>
        Explanation:<br>
        \(98\%\) of CI is larger (in width) then \(95\%\) CI but it's not specified that which technique is use to get those \(98\%\) and \(95\%\) CI.<br>
        Maybe \(98\%\) CI is get using \(\mathcal{J}_{\text{conservative}}\) and \(95\%\) CI is get using \(\mathcal{I}_{\text{plug-in}}\) then it's not guareented that  \(\mathcal{I} \subset \mathcal{J}\).<br>
        But if  \(\mathcal{I}\) and \(\mathcal{J}\) are computed using same method then \(\mathcal{I} \subset \mathcal{J}\).
        </blockquote>
        </details>
    </li>
    <li>
        Say if \([0.34,0.57]\) is a \(95\%\) asymptotic CI for an unknown parameter \(p\), then the probability that \(p\) is in that interval is:
        <ol>
            <li>\(2.5\%\)</li>
            <li>\(5\%\)</li>
            <li>\(95\%\)</li>
            <li>None of th above</li>
        </ol>
        <details>
        <summary><span class="bb" style="color: royalblue; background-color: lightyellow; cursor:pointer;">Answer</span></summary>
        <blockquote>
        Answer is None of the above<br>
        Explanation:<br>
        What we are asking is \(\mathbb{P}(p\in[0.34,0.57])=?\)<br>
        and \(p\) here is a deterministic number like for <a  href="intro.html#kiss_ex">kiss example</a> \(p=0.05\)<br>
        So probability that \(p\)(deterministic) \(\in\) some deterministic interval is either \(0\) or \(1\)<br>
        We will see more about it below
        </blockquote>
        </details>
    </li>
</ul>

<hr>
<span id="T">Example: <b>The T</b>:</span><br>
Here we will model <b>arrival time</b> of <b>T</b><br>
We observe the inter-arrival time(in minutes) between two consecutive <b>T</b>: \(T_1,\cdots,T_n\)<br>
And we assume that these inter-arrival times are <b>mutually independent</b> and they are <a  href="../summary.html#dist-exp">exponential random variable</a> with parameter \(\lambda\).<br>
Mutual independence of \(T\)'s is plausible but still debatable.
<details>
    <summary><span class="bb" style="color: royalblue; background-color: lightyellow; cursor:pointer;">But why exponential distribution?</span></summary>
    <blockquote>
        Because of it's <b>Memorylessness</b> property: Probability that you wait for \(t\)Min, given that you already waited for \(s\)Min \(=\) Probability that you wait for \(t\)Min<br>
        <br>
        PDF of \(T\sim Exp(\lambda)\):<br>
        \(f_\lambda(t)=\lambda e^{-\lambda t}\quad t\gt 0\)<br>
        Now what is the \(\mathbb{P}(T\gt t+s|T\gt t)?\)<br>
        \(\mathbb{P}(T\gt t+s|T\gt t)=\)  \( \frac{\mathbb{P}(T \gt t+s \text{ and } T\gt s )}{  \mathbb{P}(T\gt t)  }  \)<br>
        <br>
        \(\Rightarrow \mathbb{P}(T\gt t+s|T\gt t)=\)  \( \frac{\mathbb{P}(T \gt t+s)}{  \mathbb{P}(T\gt t)  }  \)<br>
        <br>
        <dl><dd><ul><li>
            \( \mathbb{P}(T\gt t')=\lambda\int_{t'}^\infty e^{-\lambda x}dx =\) \(\frac{\lambda}{-\lambda}e^{-\lambda x}|_{t'}^\infty=\) \(e^{-\lambda t'}\)<br>
        </li></ul></dd></dl>
        \(\Rightarrow \mathbb{P}(T\gt t+s|T\gt t)=\)  \( \frac{e^{-\lambda (t+s) }}{ e^{-\lambda t} } = e^{-\lambda s} \)<br>
        \[\Rightarrow \mathbb{P}(T\gt t+s|T\gt t)=\mathbb{P}(T\gt s)\]
    </blockquote>
</details><br>
We should run this experiment for specific time of a day cause rush hours will generate bias/error in our sampling.
\(T,T_1,\cdots,T_n \stackrel{iid}{\sim} Exp(\lambda)\)<br>
\(\mathbb{E}[T]=\frac{1}{\lambda}\)  \(\text{var}(T)=\frac{1}{\lambda^2}\)<br>
Estimate of \(\frac{1}{\lambda}\) is \[\overline{T}_n=\frac{1}{n}\sum_{i=1}^{n}T_i\]<br>
So a natural estimate of \(\lambda\) is: \[\hat{\lambda}=\frac{1}{\overline{T}_n}\]<br>
<details>
    <summary><span class="bb" style="color: royalblue; background-color: lightyellow; cursor:pointer;">What about consistency of \(\hat{\lambda}\)?</span></summary>
    <blockquote>
        Yes, it's a consistence estimator.<br>
        By the <a  href="/stats/lln-clt/#lln">LLN:</a><br>
        \[\overline{T}_n:=\frac{1}{n}\sum _{i=1}^ n T_ i \xrightarrow [n\to \infty ]{\mathbb{P},\mbox{ a.s.}} \frac{1}{\lambda}\]
        And by <a  href="convergence.html#cmt">Continuous mapping theorem</a>:<br>
        \(f(\overline{T}_n) \xrightarrow [n\to \infty ]{\mbox{ a.s.}/\mathbb{P}/(d)} f(\frac{1}{\lambda})\)<br>
        Here \(f(x)=1/x\) So:<br>
        \[\frac{1}{\overline{T}_n} \xrightarrow [n\to \infty ]{\mbox{ a.s.}/\mathbb{P}/(d)} \lambda\]

    </blockquote>
</details>
<details>
    <summary><span class="bb" style="color: royalblue; background-color: lightyellow; cursor:pointer;">Is \(\hat{\lambda}\) biased or unbiased?</span></summary>
    <blockquote>
        \(\hat{\lambda}\) is a biased  estimator of \(\lambda\)<br>
        \(\mathbb{E}\left[\frac{1}{\overline{T}_n}\right]\neq \lambda   \)<br>
        \(\frac{1}{x}\) is a convex function and by <a  href="bias.html#jensen">Jensen's Inequality</a>  \(\mathbb{E}\left[\frac{1}{\overline{T}_n}\right] \gt  \frac{1}{\mathbb{E}[\overline{T}_n]}\)

    </blockquote>
</details>
By the <a  href="/stats/lln-clt/#lln">LLN:</a>
\[\overline{T}_n:=\frac{1}{n}\sum _{i=1}^ n T_ i \xrightarrow [n\to \infty ]{\mathbb{P},\mbox{ a.s.}} \frac{1}{\lambda}\]
Then by <a  href="convergence.html#cmt">Continuous mapping theorem</a>:<br>
\(f(\overline{T}_n) \xrightarrow [n\to \infty ]{\mbox{ a.s.}/\mathbb{P}/(d)} f(\frac{1}{\lambda})\)<br>
Here \(f(x)=1/x\) So:
\[\hat{\lambda}=\frac{1}{\overline{T}_n} \xrightarrow [n\to \infty ]{\mbox{ a.s.}/\mathbb{P}/(d)} \lambda\]
also \(\mathbb{E}[\overline{T}_n]=\frac{1}{\lambda}\) and \(\text{var}[\overline{T}_n]=\frac{1}{\lambda^2}\)
Then By <a  href="/stats/lln-clt/#clt">CLT</a>
\[\sqrt{n}\left(  \overline{T}_n-\frac{1}{\lambda} \right)   \xrightarrow [n\to \infty ]{} \mathcal{N}\left(0,\frac{1}{\lambda^2}\right) \]
But this is <b>not</b> what we want<b>!</b><br>
We want to estimate \(\lambda\) not \(\frac{1}{\lambda}\) so we want CLT on estimator of \(\lambda\) that is \(\hat{\lambda}\)<br>
What we want is something like:
\[\sqrt{n}\left(  \hat{\lambda}-\lambda \right)   \xrightarrow [n\to \infty ]{} \mathcal{N}\left(0,\sigma^2\right) \]
This will be covered in <a  href="delta.html#T">Delta Method</a>.

</p>
<button class="accordion">\(\text{Discussion}\)</button>
<div class="panel">
    <script src="https://utteranc.es/client.js"
        repo="yuvraj97/stats.github.io"
        issue-term="estimation-ci-discussion"
        theme="github-light"
        crossorigin="anonymous"
        async>
    </script>
</div>
<button class="accordion">\(\text{Put up a question}\)</button>
<div class="panel">
    <script src="https://utteranc.es/client.js"
        repo="yuvraj97/stats.github.io"
        issue-term="estimation-ci-questions"
        theme="github-light"
        crossorigin="anonymous"
        async>
    </script>
</div>
<div class="slack-discuss" onclick=" window.open('https://join.slack.com/t/quantml-org/shared_invite/zt-jffw86bo-6M260iyt1q2MgBma9elewg','_blank')">
    Join our Slack <img src="/data/img/slack.png" alt="Slack"> discussion forum
</div><br>
<div class='buttons'>
    <button class="button jump" onclick="window.location.href = 'bias.html';">&#x25C0;&nbsp;&nbsp;Bias</button>
    <button class="button jump"  style="float: right;" onclick="window.location.href = 'delta.html';">Delta&nbsp;&nbsp;&#x25B6;</button>
</div><br>
<!--=================== MODELS ===================-->

<!--=============== LOGIN MODEL[START] ===============-->
<div id="login-model" class="modal">
    <form class="modal-content animate" id="login-form">
    
        <a class="close" style="float: right; padding-top: 0%; padding-bottom: 0%;" onclick="document.getElementById('login-model').style.display='none'">X</a>
        <div class="container" style="margin: 1rem; margin-bottom: -1rem">
        <label for="email"><b>Email Address</b></label>
        <input id="login-email" onkeypress="emailAddressIsValidated();setDisplay('network-request-failed', 'none');" class="loginInput" ref="emailRef"  type="email" placeholder="Enter Email Address" name="email" required>
        <div id="login-error-msg" class="error-msg">
            <img style="float: left;" src="/data/auth/error.png" alt="!" width="50px" height="50px">
            <div style="-webkit-transform: translateY(.6rem); transform: translateY(.6rem);">Invalid Email Address</div>
        </div>
        <div id="login-email-user-not-found" class="warn-msg"></div>
        <label for="psw"><b>Password</b></label>
        <input id="login-password" onkeypress="passwordIsValidated();setDisplay('network-request-failed', 'none');" class="loginInput" type="password" placeholder="Enter Password" name="psw" required>
        <div id="password-error-msg" class="error-msg">
            <img style="float: left;" src="/data/auth/error.png" alt="!" width="50px" height="50px">
            <div style="-webkit-transform: translateY(.6rem); transform: translateY(.6rem);">Incorrect Password</div>
        </div>

        <div style="display: none;" id="network-request-failed" class="error-msg">
            <img style="float: left;" src="/data/auth/error.png" alt="!" width="50px" height="50px">
            <div style="-webkit-transform: translateY(.6rem); transform: translateY(.6rem);">Internet Connection Error</div>
        </div>
            
        <button class="form-buttons login-button" type="submit">
            <span id="login-button-text">Login</span>
        </button>
        <button id="forgot-password" class="form-buttons forgot-button">
            <span id="forgot-button-text">Forgot Password</span>
        </button>
        </div>
        <br>
    </form>
    </div>
<!--=============== LOGIN MODEL[END] ===============-->

<!--=============== Password Reset Link Sent MODEL[START] ===============-->

<div id="password-reset-link-sent-model" class="modal">
    <div class="modal-content animate" id="login-form">    
        <a class="close" style="float: right; padding-top: 0%; padding-bottom: 0%;" onclick="document.getElementById('password-reset-link-sent-model').style.display='none'">X</a>
        <div class="container" style="margin: 1rem;">
<span id='password-reset-link-sent-txt'></span>
        <button onclick="document.getElementById('password-reset-link-sent-model').style.display='none'" class="form-buttons login-button">OK</button>
        </div>
    </div>
</div>
        
<!--=============== Password Reset Link Sent MODEL[END] ===============-->

<!--=============== SETTINGS[START] ===============-->

<div id="settings-model" class="modal">
    <div class="modal-content animate">
        <a class="close" style="float: right; padding-top: 0%; padding-bottom: 0%;" onclick="document.getElementById('settings-model').style.display='none'">X</a>
        <div class="container settings" style="margin: 1rem;">
            Font size &nbsp; 
            <button style="font-size: 18px;" class="button" onclick="incrementFontSize();setFontSize()">+</button> 
            <button style="font-size: 18px;" class="button" onclick="decrementFontSize();setFontSize()">-</button>
            <br>
        </div>
    </div>
</div>
        
<!--=============== SETTINGS[END] ===============-->

                    </section>
</div>
<br><br>

                    </div>
           <script>
            var acc = document.getElementsByClassName("accordion");
            var i;

            for (i = 0; i < acc.length; i++) {
                acc[i].addEventListener("click", function() {
                    this.classList.toggle("active");
                    var panel = this.nextElementSibling;
                    if (panel.style.maxHeight) {
                        panel.style.maxHeight = null;
                    } else {
                        panel.style.maxHeight = panel.scrollHeight + "px";
                    }
                });
            }
            </script>
        <!-- Scripts -->
            <script src="/data/assets/js/jquery.min.js"></script>
            <script src="/data/assets/js/jquery.scrollex.min.js"></script>
            <script src="/data/assets/js/jquery.scrolly.min.js"></script>
            <script src="/data/assets/js/browser.min.js"></script>
            <script src="/data/assets/js/breakpoints.min.js"></script>
            <script src="/data/assets/js/util.js"></script>
            <script src="/data/assets/js/main.js"></script>
			<script src="/data/initialize-css.js"></script>
            <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"></script>
            <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-auth.js"></script>
            <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-firestore.js"></script>
            <script src="/data/auth/auth.js"></script>
            <script src="/data/index.js"></script>
            <script src="/stats/initialize.js"></script>
            <script>setTimeout(() => {document.querySelector('body').style.display="block"}, 0)</script>
    </body>
</html>
